{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\CraftBazaar\\\\CraftBazaar\\\\frontend\\\\src\\\\pages\\\\Cart.jsx\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n//importing cart item component to render each item\nimport CartItem from '../components/CartItem';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const [items, setItems] = useState([]);\n  const navigator = useNavigate();\n\n  //function to get all cart items for user\n  function getItems() {\n    const token = localStorage.getItem('userToken');\n    axios.get(`http://localhost:5000/cart/`, {\n      headers: {\n        Authorization: token\n      }\n    }).then(response => {\n      setItems(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  // function to update the cart quantity \n  function updateCartItemQuantity(itemId, newQuantity) {\n    axios.put('http://localhost:5000/cart/updateQty', {\n      cartId: itemId,\n      qty: newQuantity\n    }).then(response => {\n      console.log(response.data);\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n  }\n\n  // calculating total with useMemo hook\n  const calculateTotals = useMemo(() => {\n    let totalProducts = 0;\n    let totalAmount = 0;\n    if (items.length != 0) {\n      items.forEach(item => {\n        totalProducts += item.qty;\n        totalAmount += item.price * item.qty;\n      });\n    }\n    const gst = totalAmount * 0.18; // 18% GST\n    const totalBill = totalAmount + gst;\n    return {\n      totalProducts,\n      totalAmount,\n      gst,\n      totalBill\n    };\n  }, [items]);\n\n  //handle the order now button\n  const handleOrderNow = async () => {\n    try {\n      const token = localStorage.getItem('userToken'); // Get token\n      const response = await axios.post('http://localhost:5000/orders', {\n        items: items.map(item => ({\n          productId: item._id,\n          quantity: item.qty,\n          price: item.price,\n          name: item.p_name\n        })),\n        totalAmount: calculateTotals.totalAmount,\n        gst: calculateTotals.gst,\n        totalBill: calculateTotals.totalBill\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      if (response.status == 201) navigator(`/order/${response.data._id}`);\n    } catch (error) {\n      console.error('Error placing order:', error);\n    }\n  };\n\n  //get cart items on render\n  useEffect(() => {\n    getItems();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid p-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center fw-normal fst-italic\",\n        children: \"Cart Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-7\",\n          children: items.length == 0 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"fw-normal text-center fst-italic\",\n            children: \"No Items In the cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 46\n          }, this) : items.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n            item: item,\n            onQuantityChange: updateCartItemQuantity\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vr g-0 opacity-100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), items.length == 0 ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Total Products: \", calculateTotals.totalProducts]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Total Amount: \\u20B9\", calculateTotals.totalAmount.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"GST (18%): \\u20B9\", calculateTotals.gst.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Total Bill: \\u20B9\", calculateTotals.totalBill.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleOrderNow,\n            children: \"Order Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(Cart, \"M/lN6/rtnDM6T9zjSKXt9p8wWpk=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["axios","React","useEffect","useMemo","useState","useNavigate","CartItem","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","items","setItems","navigator","getItems","token","localStorage","getItem","get","headers","Authorization","then","response","data","catch","err","console","log","updateCartItemQuantity","itemId","newQuantity","put","cartId","qty","calculateTotals","totalProducts","totalAmount","length","forEach","item","price","gst","totalBill","handleOrderNow","post","map","productId","_id","quantity","name","p_name","status","error","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onQuantityChange","toFixed","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/CraftBazaar/CraftBazaar/frontend/src/pages/Cart.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useMemo, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n//importing cart item component to render each item\r\nimport CartItem from '../components/CartItem';\r\n\r\nfunction Cart() {\r\n\r\n    const [items, setItems] = useState([]);\r\n    const navigator = useNavigate();\r\n\r\n    //function to get all cart items for user\r\n    function getItems() {\r\n        const token = localStorage.getItem('userToken');\r\n\r\n        axios\r\n            .get(`http://localhost:5000/cart/`, {\r\n                headers: {\r\n                    Authorization: token\r\n                }\r\n            })\r\n            .then((response) => {\r\n                setItems(response.data);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n    }\r\n\r\n    // function to update the cart quantity \r\n    function updateCartItemQuantity(itemId, newQuantity) {\r\n        axios\r\n            .put('http://localhost:5000/cart/updateQty', {\r\n                cartId: itemId,\r\n                qty: newQuantity\r\n            })\r\n            .then((response) => {\r\n                console.log(response.data);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.response.data);\r\n\r\n            })\r\n    }\r\n\r\n    // calculating total with useMemo hook\r\n    const calculateTotals = useMemo(() => {\r\n        let totalProducts = 0;\r\n        let totalAmount = 0;\r\n\r\n        if (items.length != 0) {\r\n            items.forEach((item) => {\r\n                totalProducts += item.qty;\r\n                totalAmount += item.price * item.qty;\r\n            });\r\n        }\r\n\r\n        const gst = totalAmount * 0.18; // 18% GST\r\n        const totalBill = totalAmount + gst;\r\n\r\n        return { totalProducts, totalAmount, gst, totalBill };\r\n    }, [items]);\r\n\r\n    //handle the order now button\r\n    const handleOrderNow = async () => {\r\n        try {\r\n            const token = localStorage.getItem('userToken'); // Get token\r\n            const response = await axios.post(\r\n                'http://localhost:5000/orders',\r\n                {\r\n                    items: items.map((item) => ({\r\n                        productId: item._id,\r\n                        quantity: item.qty,\r\n                        price: item.price,\r\n                        name: item.p_name,\r\n                    })),\r\n                    totalAmount: calculateTotals.totalAmount,\r\n                    gst: calculateTotals.gst,\r\n                    totalBill: calculateTotals.totalBill,\r\n                },\r\n                {\r\n                    headers: {\r\n                        Authorization: token,\r\n                    },\r\n                }\r\n            );\r\n\r\n            if (response.status == 201)\r\n                navigator(`/order/${response.data._id}`)\r\n\r\n        } catch (error) {\r\n            console.error('Error placing order:', error);\r\n        }\r\n    };\r\n\r\n    //get cart items on render\r\n    useEffect(() => {\r\n        getItems();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container-fluid p-3\">\r\n                <h1 className=\"text-center fw-normal fst-italic\">Cart Items</h1>\r\n                <hr />\r\n                <div className=\"row p-3\">\r\n                    <div className=\"col-md-7\">\r\n                        {items.length == 0 ? <h1 className='fw-normal text-center fst-italic'>No Items In the cart</h1> :\r\n                            items.map((item) => (\r\n                                <CartItem key={item._id} item={item} onQuantityChange={updateCartItemQuantity} />\r\n                            ))}\r\n                    </div>\r\n                    <div className=\"vr g-0 opacity-100\"></div>\r\n                    {items.length == 0 ? '' : (\r\n                        <div className=\"col-md-4\">\r\n                            <h2>Order Summary</h2>\r\n                            <p>Total Products: {calculateTotals.totalProducts}</p>\r\n                            <p>Total Amount: ₹{calculateTotals.totalAmount.toFixed(2)}</p>\r\n                            <p>GST (18%): ₹{calculateTotals.gst.toFixed(2)}</p>\r\n                            <hr />\r\n                            <p>Total Bill: ₹{calculateTotals.totalBill.toFixed(2)}</p>\r\n                            <button className=\"btn btn-primary\" onClick={handleOrderNow}>Order Now</button>\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}